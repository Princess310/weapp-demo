<import src="../../../templates/contentParse.wxml"/>

<view class="user-info">
	<view class="feed-detail-card user-info" data-id="{{props.match.detail.id}}">
		<view class="feed-detail-header">
			<view class="user-icon-wrapper">
				<image mode="aspectFill" class="user-icon" catchtap="handlViewAvatar" src="{{props.match.detail.avatar}}" data-src="{{props.match.detail.avatar}}">
				<view wx:if="{{props.match.detail.verify_status == 2}}" class="vip">V</view>
			</view>
			<view class="user-info">
				<view class="user-name">
					{{props.match.detail.nickname}}
				</view>
				<view class="user-role">
					<text class="user-role-item" wx:if="{{props.match.detail.company !== ''}}">{{props.match.detail.company}}</text>
					<text class="user-role-item" wx:if="{{props.match.detail.position !== ''}}">{{props.match.detail.position}}</text>
				</view>
				<view class="user-identity">
					<text>{{props.match.detail.tag_identity_name}}</text>
					<text class="other-info">
						<text class="sub-item effect-item">
							<text>影响力：</text>
							<text class="effect-value">{{props.match.detail.influence}}</text>
						</text>
						<text class="sub-item honesty-item">
							<text>诚信等级</text>
							<text class="honesty-bar-bg">
								<text class="honesty-bar" style="width: {{props.match.detail.integrity_progress* 100 + '%'}}"></text>
							</text>
							<text class="honesty-rank">LV{{props.match.detail.integrity_level}}</text>
						</text>
					</text>
				</view>
			</view>
			<view wx:if="{{props.user.id != props.match.detail.id}}" class="follow-wrapper">
				<block wx:if="{{props.match.detail.is_my_friend > 0}}">
					<view class="wrapper" data-action="cancel" catchtap="handleFollow">
						<image src="../../../images/icon_cancel_follow.png" mode="aspectFit"/>
						<text>取消关注</text>
					</view>
				</block>
				<block wx:else>
					<view class="wrapper" data-action="follow" catchtap="handleFollow">
						<image src="../../../images/icon_follow.png" mode="aspectFit"/>
						<text>加关注</text>
					</view>
				</block>
			</view>
		</view>
		<view class="contact-info">
			<view class="item tel">
				<text class="des">手机号:</text><text class="content">{{mobile}}</text>
			</view>
			<view class="item area">
				<text class="des">地  区: </text>
				<text class="content">{{props.match.detail.address}}</text>
				<block wx:if="{{props.match.detail.city_name}}">
					<image class="pin" src="../../../images/pin_icon.png" mode="aspectFit"/>
					<text>{{props.match.detail.city_name}}</text>
				</block>
			</view>
		</view>
	</view>
	<view wx:if="{{props.match.detail.intro !== '' || props.match.detail.business_intro !== ''}}" class="weui-panel weui-panel_access">
		<view class="weui-panel__bd">
			<view wx:if="{{props.match.detail.intro !== ''}}" class="weui-media-box weui-media-box_text">
				<view class="weui-media-box__title weui-media-box__title_in-text">个人简介</view>
				<view class="ali-des">{{props.match.detail.intro}}</view>
			</view>
			<view wx:if="{{props.match.detail.business_intro !== ''}}" class="weui-media-box weui-media-box_text">
				<view class="weui-media-box__title weui-media-box__title_in-text">业务介绍</view>
				<view class="ali-des">{{props.match.detail.business_intro}}</view>
			</view>
		</view>
	</view>

	<view wx:if="{{props.match.detail.pictures.length > 0}}" class="weui-panel weui-panel_access">
		<view class="weui-panel__bd user-tags">
			<view class="weui-media-box weui-media-box_text">
				<view class="weui-media-box__title weui-media-box__title_in-text">展示图片</view>
				<view class="weui-media-box__desc swiper-panel">
					<swiper indicator-dots="{{state.swiper.indicatorDots}}" indicator-active-color="{{state.swiper.color}}">
						<block wx:for="{{props.match.detail.pictures}}" wx:key="index">
							<swiper-item>
								<image src="{{item}}" data-src="{{item}}" class="slide-image" mode="aspectFit" catchtap="handleViewImage"/>
							</swiper-item>
						</block>
					</swiper>
				</view>
			</view>
		</view>
	</view>

	<view wx:if="{{props.match.myList.length > 0}}" class="weui-panel weui-panel_access">
		<view class="weui-panel__bd user-tags">
			<view class="weui-media-box weui-media-box_text">
				<view class="weui-media-box__title weui-media-box__title_in-text">TA的动态</view>
				<view class="ali-des">
					<block wx:for="{{props.match.myList}}" wx:key="index">
						<navigator url="../../business/detail/index?id={{item.id}}" class="moment-wrapper">
							<view class="content">
								<text wx:if="{{item.sort > 0}}" class="sort">置顶</text>
								<block wx:for-items="{{item.nodes}}" wx:key="{{index}}">
									<template is="content-parse-tmpl" data="{{...item, index: index}}" />
								</block>
							</view>
							<block wx:if="{{item.pictures.length > 0}}">
								<image src="{{item.pictures[0]}}" class="moment-image" mode="aspectFit"/>
							</block>
							<view class="sub-info">
								<text>{{item.hits}}人看过</text>
							</view>
						</navigator>
					</block>
				</view>
			</view>
		</view>
	</view>
</view>
