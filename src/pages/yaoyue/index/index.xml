<template name="feed-detail-invite">
	<navigator url="../detail/index?id={{id}}" class="fedd-detail-item">
		<view class="feed-detail-left">
			<view class="user-icon-wrapper">
				<image mode="aspectFill" class="user-icon" src="{{avatar}}"/>
				<view wx:if="{{verify_status == 2}}" class="vip">V</view>
			</view>
		</view> 
		<view class="feed-detail-right">
			<view class="header">
				<view class="wrapper">
					<text class="user-name">{{nickname}}</text>
					<image wx:if="{{mobile && mobile !== ''}}" src="../../../images/dianhua_icon.png" mode="aspectFit" data-tel="{{mobile}}" catchtap="handleCall"/>
				</view>
				<view class="wrapper">
					<text wx:if="{{reward_as === 1}}" class="label supply">供</text>
					<text wx:if="{{reward_as === 2}}" class="label">求</text>
					<text wx:if="{{reward_amount > 0}}" class="money">{{reward_amount}}元</text>
					<image class="pin" src="../../../images/pin_icon.png" mode="aspectFit"/>
					<text class="distance">{{distance}}</text>
				</view>
			</view>
			<view class="sub-info">
				<text>{{company}}</text>
				<text>{{tag_identity_name}}</text>
			</view>
			<view class="time">
				<text>{{event_at}}</text>
			</view>
		</view> 
	</navigator>
	<view class="feed-content">
		{{event_summary}}
	</view>
</template>

<view class="ali-header">
	<navigator url="../../common/selectCity/index" class="left-wrapper">
		<text class="name">{{props.match.city.current.name}}</text>
		<image class="icon-menu" src="../../../images/icon_menu_down.png"/>
	</navigator>
	<view class="title" catchtap="showFilter">
		<text class="name">全部</text>
		<image class="icon-menu" src="../../../images/icon_menu_down.png"/>
	</view>
	<navigator url="../publish/index" class="right-wrapper">
		<image class="icon-menu" src="../../../images/bianji_active.png"/>
		<text class="name">发供求</text>
	</navigator>
</view>
<view class="ali-search-container">
	<view class="weui-search-bar">
		<view class="weui-search-bar__form">
			<view class="weui-search-bar__box">
				<icon class="weui-icon-search_in-box" type="search" size="14"></icon>
				<input type="text" class="weui-search-bar__input" placeholder="搜索人脉资源" value="{{state.inputVal}}" focus="{{state.inputShowed}}" bindinput="inputTyping" bindblur="hideInput" bindconfirm="handleSearch" />
				<view class="weui-icon-clear" wx:if="{{state.inputVal.length > 0}}" bindtap="clearInput">
					<icon type="clear" size="14"></icon>
				</view>
			</view>
			<label class="weui-search-bar__label" hidden="{{state.inputShowed}}" bindtap="showInput">
				<icon class="weui-icon-search" type="search" size="14"></icon>
				<view class="weui-search-bar__text">搜索人脉资源</view>
			</label>
		</view>
		<view class="weui-search-bar__cancel-btn" hidden="{{!state.inputShowed}}" bindtap="hideInput">取消</view>
	</view>
</view>
<!-- <view wx:if="{{props.user.tag_identity_id > 0 }}" class="tip-bar">
	<view class="info">
		<image src="../../../images/tip_icon.png"/>
		<text>填写您的优势需求，让匹配的人更精准！</text>
	</view>
	<navigator url="../publish/index">
		<text class="link">现在就去</text>
	</navigator>
</view> -->
<view>
	<block wx:for="{{props.match.list}}"  wx:key="id">
		<template is="feed-detail-invite" data="{{...item, index: index}}" />
	</block>
</view>

<view wx:if="{{state.showFilter}}" class="filter-panel">
	<view class="switch-filter">
		<view class="item {{state.reward_as == 1 ? 'active' : ''}}" data-id="1" data-type="type" catchtap="handleFilter">
			<text>供</text>
		</view>
		<view class="item {{state.reward_as == 2 ? 'active' : ''}}" data-id="2" data-type="type" catchtap="handleFilter">
			<text>求</text>
		</view>
		<view class="item" data-id="0" data-type="type" catchtap="handleFilter">
			<text>清除条件</text>
		</view>
	</view>
	<view class="filter-content">
		<view class="title">类目</view>
		<view class="weui-cells weui-cells_after-title action-wrapper">
			<block wx:for="{{props.match.filter.items}}" wx:key="unique">
				<view class="weui-cell weui-cell_access" hover-class="weui-cell_active" data-id="{{item.id}}" data-type="item" catchtap="handleFilter">
					<view class="weui-cell__bd">
						<text>{{item.name}}</text>
					</view>
					<view wx:if="{{item.id === state.reward_item}}" class="weui-cell__ft">
						<icon type="success_no_circle" size="23"></icon>
					</view>
				</view>
			</block>
		</view>
		<view class="title">行业角色</view>
		<view class="weui-cells weui-cells_after-title action-wrapper">
			<block wx:for="{{props.match.filter.roles}}" wx:key="unique">
				<view class="weui-cell weui-cell_access" hover-class="weui-cell_active" data-id="{{item.id}}" data-type="role" catchtap="handleFilter">
					<view class="weui-cell__bd">
						<text>{{item.name}}</text>
					</view>
					<view wx:if="{{item.id === state.tag_identity_id}}" class="weui-cell__ft">
						<icon type="success_no_circle" size="23"></icon>
					</view>
				</view>
			</block>
		</view>
	</view>
</view>